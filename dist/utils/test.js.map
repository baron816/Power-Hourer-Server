{"version":3,"sources":["../../src/utils/test.js"],"names":["process","env","NODE_ENV","beforeEach","done","clearDB","i","connection","collections","remove","readyState","connect","db","test","err","afterEach","disconnect"],"mappings":";;AAAA;;;;;;AAEAA,QAAQC,GAAR,CAAYC,QAAZ,GAAuB,SAAvB;;AAEAC,WAAW,UAASC,IAAT,EAAe;AACxB,WAASC,OAAT,GAAmB;AACjB,SAAK,IAAIC,CAAT,IAAc,iBAASC,UAAT,CAAoBC,WAAlC,EAA+C;AAC7C,uBAASD,UAAT,CAAoBC,WAApB,CAAgCF,CAAhC,EAAmCG,MAAnC,CAA0C,YAAW,CAAE,CAAvD;AACD;AACD,WAAOL,MAAP;AACD;;AAED,MAAI,iBAASG,UAAT,CAAoBG,UAApB,KAAmC,CAAvC,EAA0C;AACxC,qBAASC,OAAT,CAAiB,iBAAOC,EAAP,CAAUC,IAA3B,EAAiC,UAASC,GAAT,EAAc;AAC7C,UAAIA,GAAJ,EAAS;AACP,cAAMA,GAAN;AACD;AACD,aAAOT,SAAP;AACD,KALD;AAMD,GAPD,MAOO;AACL,WAAOA,SAAP;AACD;AACF,CAlBD;;AAoBAU,UAAU,UAASX,IAAT,EAAe;AACvB,mBAASY,UAAT;AACA,SAAOZ,MAAP;AACD,CAHD","file":"test.js","sourcesContent":["import config, { mongoose } from '../config/config';\n\nprocess.env.NODE_ENV = 'testing';\n\nbeforeEach(function(done) {\n  function clearDB() {\n    for (let i in mongoose.connection.collections) {\n      mongoose.connection.collections[i].remove(function() {});\n    }\n    return done();\n  }\n\n  if (mongoose.connection.readyState === 0) {\n    mongoose.connect(config.db.test, function(err) {\n      if (err) {\n        throw err;\n      }\n      return clearDB();\n    });\n  } else {\n    return clearDB();\n  }\n});\n\nafterEach(function(done) {\n  mongoose.disconnect();\n  return done();\n});\n"]}