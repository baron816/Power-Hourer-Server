{"version":3,"sources":["../../src/playlists/playlistModel.js"],"names":["PlaylistSchema","Schema","owner","type","Types","ObjectId","ref","required","playlistId","String","defaultStart","Number","defaultLength","thumbnail","title","playlistItems","startTime","videoLength","videoId","exposed","Boolean","default","playCount","methods","movePlaylistItem","previousIndex","newIndex","array","length","k","push","undefined","splice","save","excludeKeys","args","Object","keys","_doc","reduce","acc","key","includes","bind","plugin","model"],"mappings":";;;;;;AAAA;;;;AACA;;;;;;AAEA,IAAMA,iBAAiB,IAAI,mBAASC,MAAb,CAAoB;AACzCC,SAAO;AACLC,UAAM,mBAASF,MAAT,CAAgBG,KAAhB,CAAsBC,QADvB;AAELC,SAAK,MAFA;AAGLC,cAAU;AAHL,GADkC;AAMzCC,cAAY;AACVL,UAAMM,MADI;AAEVF,cAAU;AAFA,GAN6B;AAUzCG,gBAAcC,MAV2B;AAWzCC,iBAAeD,MAX0B;AAYzCE,aAAW;AACTV,UAAMM,MADG;AAETF,cAAU;AAFD,GAZ8B;AAgBzCO,SAAO;AACLX,UAAMM,MADD;AAELF,cAAU;AAFL,GAhBkC;AAoBzCQ,iBAAe,CACb;AACEC,eAAWL,MADb;AAEEM,iBAAaN,MAFf;AAGEO,aAAS;AACPf,YAAMM,MADC;AAEPF,gBAAU;AAFH,KAHX;AAOEO,WAAO;AACLX,YAAMM,MADD;AAELF,gBAAU;AAFL,KAPT;AAWEM,eAAW;AACTV,YAAMM,MADG;AAETF,gBAAU;AAFD;AAXb,GADa,CApB0B;AAsCzCY,WAAS;AACPhB,UAAMiB,OADC;AAEPC,aAAS;AAFF,GAtCgC;AA0CzCC,aAAW;AACTnB,UAAMQ,MADG;AAETU,aAAS;AAFA;AA1C8B,CAApB,CAAvB;;AAgDArB,eAAeuB,OAAf,GAAyB;AACvBC,kBADuB,4BACNC,aADM,EACSC,QADT,EACmB;AACxC,QAAMC,QAAQ,KAAKZ,aAAnB;AACA,QAAIW,YAAYC,MAAMC,MAAtB,EAA8B;AAC5B,UAAIC,IAAIH,WAAWC,MAAMC,MAAzB;AACA,aAAOC,MAAM,CAAb,EAAgB;AACdF,cAAMG,IAAN,CAAWC,SAAX;AACD;AACF;AACDJ,UAAMK,MAAN,CAAaN,QAAb,EAAuB,CAAvB,EAA0BC,MAAMK,MAAN,CAAaP,aAAb,EAA4B,CAA5B,EAA+B,CAA/B,CAA1B;AACA,SAAKQ,IAAL;AACD,GAXsB;AAavBC,aAbuB,yBAaF;AAAA,sCAANC,IAAM;AAANA,UAAM;AAAA;;AACnB,WAAOC,OAAOC,IAAP,CAAY,KAAKC,IAAjB,EAAuBC,MAAvB,CAA8B,UAAUC,GAAV,EAAeC,GAAf,EAAoB;AACvD,UAAI,CAACN,KAAKO,QAAL,CAAcD,GAAd,CAAL,EAAyB;AACvBD,YAAIC,GAAJ,IAAW,KAAKH,IAAL,CAAUG,GAAV,CAAX;AACD;AACD,aAAOD,GAAP;AACD,KALoC,CAKnCG,IALmC,CAK9B,IAL8B,CAA9B,EAKO,EALP,CAAP;AAMD;AApBsB,CAAzB;;AAuBA3C,eAAe4C,MAAf;;kBAEe,mBAASC,KAAT,CAAe,UAAf,EAA2B7C,cAA3B,C","file":"playlistModel.js","sourcesContent":["import mongoose from 'mongoose';\nimport mongoosePaginate from 'mongoose-paginate';\n\nconst PlaylistSchema = new mongoose.Schema({\n  owner: {\n    type: mongoose.Schema.Types.ObjectId,\n    ref: 'user',\n    required: true,\n  },\n  playlistId: {\n    type: String,\n    required: true,\n  },\n  defaultStart: Number,\n  defaultLength: Number,\n  thumbnail: {\n    type: String,\n    required: true,\n  },\n  title: {\n    type: String,\n    required: true,\n  },\n  playlistItems: [\n    {\n      startTime: Number,\n      videoLength: Number,\n      videoId: {\n        type: String,\n        required: true,\n      },\n      title: {\n        type: String,\n        required: true,\n      },\n      thumbnail: {\n        type: String,\n        required: true,\n      }\n    }\n  ],\n  exposed: {\n    type: Boolean,\n    default: true,\n  },\n  playCount: {\n    type: Number,\n    default: 0,\n  },\n});\n\nPlaylistSchema.methods = {\n  movePlaylistItem(previousIndex, newIndex) {\n    const array = this.playlistItems;\n    if (newIndex >= array.length) {\n      let k = newIndex - array.length;\n      while (k-- + 1) {\n        array.push(undefined);\n      }\n    }\n    array.splice(newIndex, 0, array.splice(previousIndex, 1)[0]);\n    this.save();\n  },\n\n  excludeKeys(...args) {\n    return Object.keys(this._doc).reduce(function (acc, key) {\n      if (!args.includes(key)) {\n        acc[key] = this._doc[key];\n      }\n      return acc;\n    }.bind(this), {});\n  }\n};\n\nPlaylistSchema.plugin(mongoosePaginate);\n\nexport default mongoose.model('playlist', PlaylistSchema);\n"]}