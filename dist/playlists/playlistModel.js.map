{"version":3,"sources":["../../src/playlists/playlistModel.js"],"names":["PlaylistSchema","Schema","owner","type","Types","ObjectId","ref","required","playlistId","String","thumbnail","title","playlistItems","startTime","Number","videoId","exposed","Boolean","default","playCount","methods","movePlaylistItem","previousIndex","newIndex","array","length","k","push","undefined","splice","save","plugin","model"],"mappings":";;;;;;AAAA;;AACA;;;;;;AAEA,IAAMA,iBAAiB,IAAI,iBAASC,MAAb,CAAoB;AACzCC,SAAO;AACLC,UAAM,iBAASF,MAAT,CAAgBG,KAAhB,CAAsBC,QADvB;AAELC,SAAK,MAFA;AAGLC,cAAU;AAHL,GADkC;AAMzCC,cAAY;AACVL,UAAMM,MADI;AAEVF,cAAU;AAFA,GAN6B;AAUzCG,aAAW;AACTP,UAAMM,MADG;AAETF,cAAU;AAFD,GAV8B;AAczCI,SAAO;AACLR,UAAMM,MADD;AAELF,cAAU;AAFL,GAdkC;AAkBzCK,iBAAe,CACb;AACEC,eAAWC,MADb;AAEEC,aAAS;AACPZ,YAAMM,MADC;AAEPF,gBAAU;AAFH,KAFX;AAMEI,WAAO;AACLR,YAAMM,MADD;AAELF,gBAAU;AAFL,KANT;AAUEG,eAAW;AACTP,YAAMM,MADG;AAETF,gBAAU;AAFD;AAVb,GADa,CAlB0B;AAmCzCS,WAAS;AACPb,UAAMc,OADC;AAEPC,aAAS;AAFF,GAnCgC;AAuCzCC,aAAW;AACThB,UAAMW,MADG;AAETI,aAAS;AAFA;AAvC8B,CAApB,CAAvB;;AA6CAlB,eAAeoB,OAAf,GAAyB;AACvBC,kBADuB,4BACNC,aADM,EACSC,QADT,EACmB;AACxC,QAAMC,QAAQ,KAAKZ,aAAnB;AACA,QAAIW,YAAYC,MAAMC,MAAtB,EAA8B;AAC5B,UAAIC,IAAIH,WAAWC,MAAMC,MAAzB;AACA,aAAOC,MAAM,CAAb,EAAgB;AACdF,cAAMG,IAAN,CAAWC,SAAX;AACD;AACF;AACDJ,UAAMK,MAAN,CAAaN,QAAb,EAAuB,CAAvB,EAA0BC,MAAMK,MAAN,CAAaP,aAAb,EAA4B,CAA5B,EAA+B,CAA/B,CAA1B;AACA,SAAKQ,IAAL;AACD;AAXsB,CAAzB;;AAcA9B,eAAe+B,MAAf;;kBAEe,iBAASC,KAAT,CAAe,UAAf,EAA2BhC,cAA3B,C","file":"playlistModel.js","sourcesContent":["import {mongoose} from '../config/config';\nimport mongoosePaginate from 'mongoose-paginate';\n\nconst PlaylistSchema = new mongoose.Schema({\n  owner: {\n    type: mongoose.Schema.Types.ObjectId,\n    ref: 'user',\n    required: true,\n  },\n  playlistId: {\n    type: String,\n    required: true,\n  },\n  thumbnail: {\n    type: String,\n    required: true,\n  },\n  title: {\n    type: String,\n    required: true,\n  },\n  playlistItems: [\n    {\n      startTime: Number,\n      videoId: {\n        type: String,\n        required: true,\n      },\n      title: {\n        type: String,\n        required: true,\n      },\n      thumbnail: {\n        type: String,\n        required: true,\n      }\n    }\n  ],\n  exposed: {\n    type: Boolean,\n    default: true,\n  },\n  playCount: {\n    type: Number,\n    default: 0,\n  },\n});\n\nPlaylistSchema.methods = {\n  movePlaylistItem(previousIndex, newIndex) {\n    const array = this.playlistItems;\n    if (newIndex >= array.length) {\n      let k = newIndex - array.length;\n      while (k-- + 1) {\n        array.push(undefined);\n      }\n    }\n    array.splice(newIndex, 0, array.splice(previousIndex, 1)[0]);\n    this.save();\n  }\n};\n\nPlaylistSchema.plugin(mongoosePaginate);\n\nexport default mongoose.model('playlist', PlaylistSchema);\n"]}